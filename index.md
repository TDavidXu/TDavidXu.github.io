
##  开发联调环境没管好，无备份，数据库节点丢失，几百人工作被阻塞；重建数据库时竟然无端引入不一致风险却不带来任何好处, 2019年5月起的各种开发环境的DI行为不一致问题很可能就是Davidxu挖的坑

徐大伟2018年底起担任效能中心总监岗位，至事发时(2019年4月底)有近**半年**时间,这半年时间里**数百名**工程师**共用的**开发**联调**环境的**数据库节点**一直处于**无人管理**状态。  
徐大伟担任效能中心总监近半年都未能识别这一严重拖累效能的风险点，2019年4月底，该数据库节点**硬盘物理损坏**，无法修复也无法恢复数据,也**无备份**数据，无法恢复环境，造成**数百人工作被阻塞**，徐大伟这个效能总监可真能提升效能啊，让**几百号人闲着**真有效能。   
  
如果只是这样一个工作疏忽也就罢了，毕竟人非圣贤熟能无过，咱们不能拿放大镜看别人的缺点啊。

可是徐大伟解决这个问题的方法实在让人大跌眼镜，不按照尽可能接近线上的方式恢复数据库库表结构和基础数据，此人无视线上数据库是**多库多表的物理机MySQL**,无脑强推用**单库单表的Docker MySQL**来恢复，此时有人提出**警告**说AMS PTP用的数据库中间件 虽然有一定的屏蔽源数据库多库多表的能力，对源数据库是单库单表的情形和多库多表的情形会有**处理不一致**的情况，如果用单库单表重建，将会导致**联调开发环境与线上不一致**给未来的开发工作带来**效率障碍和质量风险**，徐大伟**无视警告一意孤行，坚持强推。这就是在给全部门挖坑！**。  
![开发联调环境的普文二](/dev_db_down.png)   

|  时间   | DB分库分表 |  DB节点   | 优缺点  |
|  ----  | ----  | ----           | ---- |
| 重建前 | 多库多表 | 物理机Tlinux  |        |
| 重建后 | 单库单表 | Docker       |  引入不一致风险，单未带来Docker动态生成环境的优点 |

**2019年5月起的各种开发环境的DI行为不一致问题很可能就是Davidxu挖的坑所造成的！**  
**开发、测试的联调环境应当尽可能与线上一致，除非不一致能带来明显好处，这是基本的软件工程常识，工作一年的应届生都懂，徐大总监为啥不懂？**

对其动机的猜测： 徐大伟为了盲目追求个人KPI，想给他力推一个基于Docker的测试环境管理系统(LEGO系统)（是他调来之前已经搞起来的）找个使用场景，而开发联调环境的数据库节点丢失的事故成了他的机会，他为了**追求个人KPI无视公司利益，无视客观规律**，不惜在开发联调环境**引入不一致风险**（并且这样的用法相比于过去多库多表的物理机节点**不带来任何效能、质量上的好处**）。
那么为什么徐大伟不搞一个基于LEGO Docker的多库多表的数据库节点来重建环境呢，这样引入的不一致风险就小得多，又能实现个人KPI又不那么严重的违背公司利益了？ 因为他能力不行啊，他手下的测试开发工程师最初开发LEGO时，做成了单库单表，单并不意味着Docker里的DB只能是单库单表的啊，**执行一下多库多表的DDL不就成了多库多表的Docker DB了吗？ 为啥不这么做呢？** 因为他**没有能力稳定团队**，到4月底时开发LEGO的元老们普遍去意已决，有连系活水转部门的，有准备辞职的，总之到了下半年，LEGO团队剩下的司龄最长的人是司龄一年多的，**老骨干快跑光了**。手下青黄不接，他自己没常识不懂技术，所以**他不知道其实可以用基于LEGO Docker的多库多表数据库节点来重建环境**

